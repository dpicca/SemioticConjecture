<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Semiotic (pkg) - Semiotic Conjecture</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Semiotic (pkg)";
        var mkdocs_page_input_path = "api/semiotic.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Semiotic Conjecture
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Semiotic Conjecture</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../output_schema/">Output schema</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">API</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cli/">CLI</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../config/">Config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../corpus/">Corpus</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../analysis/">Analysis</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../decodability/">Decodability</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../frontier/">Frontier</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../reporting/">Reporting</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../metrics/">Metrics (pkg)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../surrogates/">Surrogates (pkg)</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Semiotic (pkg)</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#semiconj.semiotic">semiotic</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#semiconj.semiotic.parser">parser</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#semiconj.semiotic.parser.compute_d_intr">compute_d_intr</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#semiconj.semiotic.parser.extract_triads">extract_triads</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#semiconj.semiotic.parser.split_sentences">split_sentences</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#semiconj.semiotic.parser.words">words</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#parser">parser</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#semiconj.semiotic.parser">parser</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#semiconj.semiotic.parser.compute_d_intr">compute_d_intr</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#semiconj.semiotic.parser.extract_triads">extract_triads</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#semiconj.semiotic.parser.split_sentences">split_sentences</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#semiconj.semiotic.parser.words">words</a>
    </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Semiotic Conjecture</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">API</li>
      <li class="breadcrumb-item active">Semiotic (pkg)</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="semiotic-package">Semiotic Package<a class="headerlink" href="#semiotic-package" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">



<a id="semiconj.semiotic"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">










<div class="doc doc-object doc-module">



<h2 id="semiconj.semiotic.parser" class="doc doc-heading">
            <code>parser</code>


<a href="#semiconj.semiotic.parser" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="semiconj.semiotic.parser.compute_d_intr" class="doc doc-heading">
            <code class="highlight language-python">compute_d_intr(text)</code>

<a href="#semiconj.semiotic.parser.compute_d_intr" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Compute intrinsic decodability components and aggregate.
Returns dict with: structural_precision, convergence, coherence, entropy, D_intr.</p>


            <details class="quote">
              <summary>Source code in <code>semiconj/semiotic/parser.py</code></summary>
              <pre class="highlight"><code class="language-python">def compute_d_intr(text: str) -&gt; Dict[str, float]:
    """Compute intrinsic decodability components and aggregate.
    Returns dict with: structural_precision, convergence, coherence, entropy, D_intr.
    """
    triads = extract_triads(text)
    sents = split_sentences(text)
    structural_precision = 0.0
    if sents:
        structural_precision = sum(1 for s in sents if s.strip())
        structural_precision = min(1.0, len(triads) / max(1, len(sents)))
    interps = [t.interpretant for t in triads]
    # convergence: mean pairwise similarity among interpretants
    if len(interps) &lt; 2:
        convergence = 0.0
    else:
        vecs = interpretant_vectors(interps)
        sims = []
        for i in range(len(vecs)):
            for j in range(i+1, len(vecs)):
                sims.append(_cosine(vecs[i], vecs[j]))
        convergence = max(0.0, sum(sims) / max(1, len(sims)))
    coherence = global_coherence(text)
    entropy = interpretive_entropy(interps)
    # Aggregate: geometric-like combination with entropy penalty
    base = (structural_precision + convergence + coherence) / 3.0
    d_intr = max(0.0, min(1.0, base * (1.0 - 0.5 * entropy)))
    return {
        "structural_precision": structural_precision,
        "convergence": convergence,
        "coherence": coherence,
        "entropy": entropy,
        "D_intr": d_intr,
    }</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="semiconj.semiotic.parser.extract_triads" class="doc doc-heading">
            <code class="highlight language-python">extract_triads(text)</code>

<a href="#semiconj.semiotic.parser.extract_triads" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Rule-based triad extraction heuristics.
- sign: prominent noun-like token (capitalized word or noun-ish pattern)
- object: next capitalized token or repeated head noun
- interpretant: definitional or summary sentence containing 'is/means/represents/defines'</p>


            <details class="quote">
              <summary>Source code in <code>semiconj/semiotic/parser.py</code></summary>
              <pre class="highlight"><code class="language-python">def extract_triads(text: str) -&gt; List[Triad]:
    """Rule-based triad extraction heuristics.
    - sign: prominent noun-like token (capitalized word or noun-ish pattern)
    - object: next capitalized token or repeated head noun
    - interpretant: definitional or summary sentence containing 'is/means/represents/defines'
    """
    sents = split_sentences(text)
    triads: List[Triad] = []
    for s in sents:
        w = WORD_RE.findall(s)
        if not w:
            continue
        # sign
        sign_candidates = [t for t in w if (t[0:1].isupper() and len(t) &gt; 1)]
        sign = sign_candidates[0] if sign_candidates else (w[0] if w else "")
        # object
        obj_candidates = [t for t in w[1:] if (t[0:1].isupper() and len(t) &gt; 1)]
        obj = obj_candidates[0] if obj_candidates else (w[1] if len(w) &gt; 1 else sign)
        # interpretant
        if re.search(r"\b(is|means|represents|defines)\b", s, flags=re.IGNORECASE):
            interpretant = s.strip()
        else:
            interpretant = s.strip()
        if sign and obj and interpretant:
            triads.append(Triad(sign=str(sign), obj=str(obj), interpretant=interpretant))
    return triads</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="semiconj.semiotic.parser.split_sentences" class="doc doc-heading">
            <code class="highlight language-python">split_sentences(text)</code>

<a href="#semiconj.semiotic.parser.split_sentences" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Split text into sentences.</p>
<p>Behavior:
- If an Ollama NLP model is configured, use it to obtain sentence splits.
- Otherwise, fall back to a simple regex-based splitter.</p>


            <details class="quote">
              <summary>Source code in <code>semiconj/semiotic/parser.py</code></summary>
              <pre class="highlight"><code class="language-python">def split_sentences(text: str) -&gt; List[str]:
    """Split text into sentences.

    Behavior:
    - If an Ollama NLP model is configured, use it to obtain sentence splits.
    - Otherwise, fall back to a simple regex-based splitter.
    """
    try:
        from ..config import get_runtime_config
        cfg = get_runtime_config()
        model = getattr(cfg, "nlp_ollama_model", "").strip()
        if model:
            try:
                from ..surrogates.ollama_client import get_shared_client  # type: ignore
                client = get_shared_client(host=getattr(cfg, "nlp_ollama_host", "http://localhost:11434"))
                res = client.nlp(model=model, text=text)
                sents = res.get("sentences", [])
                if isinstance(sents, list) and sents:
                    return [str(s).strip() for s in sents if str(s).strip()]
            except Exception:
                logging.getLogger(__name__).warning('Failed to load Ollama NLP model. Falling back to regex-based sentence splitter.', exc_info=True)
                pass
    except Exception:
        pass
    parts = SENT_RE.split(text.strip())
    return [p for p in parts if p]</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="semiconj.semiotic.parser.words" class="doc doc-heading">
            <code class="highlight language-python">words(s)</code>

<a href="#semiconj.semiotic.parser.words" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Tokenize a sentence string into words, delegating to central tokenizer.
Uses metrics.complexity.tokenize to honor Ollama-based tokenization when enabled.</p>


            <details class="quote">
              <summary>Source code in <code>semiconj/semiotic/parser.py</code></summary>
              <pre class="highlight"><code class="language-python">def words(s: str) -&gt; List[str]:
    """Tokenize a sentence string into words, delegating to central tokenizer.
    Uses metrics.complexity.tokenize to honor Ollama-based tokenization when enabled.
    """
    try:
        from ..metrics.complexity import tokenize  # type: ignore
        return tokenize(s)
    except Exception:
        return WORD_RE.findall(s.lower())</code></pre>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


  </div>

    </div>

</div><h2 id="submodules">Submodules<a class="headerlink" href="#submodules" title="Permanent link">&para;</a></h2>
<h3 id="parser">parser<a class="headerlink" href="#parser" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-module">



<a id="semiconj.semiotic.parser"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="semiconj.semiotic.parser.compute_d_intr" class="doc doc-heading">
            <code class="highlight language-python">compute_d_intr(text)</code>

<a href="#semiconj.semiotic.parser.compute_d_intr" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Compute intrinsic decodability components and aggregate.
Returns dict with: structural_precision, convergence, coherence, entropy, D_intr.</p>


            <details class="quote">
              <summary>Source code in <code>semiconj/semiotic/parser.py</code></summary>
              <pre class="highlight"><code class="language-python">def compute_d_intr(text: str) -&gt; Dict[str, float]:
    """Compute intrinsic decodability components and aggregate.
    Returns dict with: structural_precision, convergence, coherence, entropy, D_intr.
    """
    triads = extract_triads(text)
    sents = split_sentences(text)
    structural_precision = 0.0
    if sents:
        structural_precision = sum(1 for s in sents if s.strip())
        structural_precision = min(1.0, len(triads) / max(1, len(sents)))
    interps = [t.interpretant for t in triads]
    # convergence: mean pairwise similarity among interpretants
    if len(interps) &lt; 2:
        convergence = 0.0
    else:
        vecs = interpretant_vectors(interps)
        sims = []
        for i in range(len(vecs)):
            for j in range(i+1, len(vecs)):
                sims.append(_cosine(vecs[i], vecs[j]))
        convergence = max(0.0, sum(sims) / max(1, len(sims)))
    coherence = global_coherence(text)
    entropy = interpretive_entropy(interps)
    # Aggregate: geometric-like combination with entropy penalty
    base = (structural_precision + convergence + coherence) / 3.0
    d_intr = max(0.0, min(1.0, base * (1.0 - 0.5 * entropy)))
    return {
        "structural_precision": structural_precision,
        "convergence": convergence,
        "coherence": coherence,
        "entropy": entropy,
        "D_intr": d_intr,
    }</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="semiconj.semiotic.parser.extract_triads" class="doc doc-heading">
            <code class="highlight language-python">extract_triads(text)</code>

<a href="#semiconj.semiotic.parser.extract_triads" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Rule-based triad extraction heuristics.
- sign: prominent noun-like token (capitalized word or noun-ish pattern)
- object: next capitalized token or repeated head noun
- interpretant: definitional or summary sentence containing 'is/means/represents/defines'</p>


            <details class="quote">
              <summary>Source code in <code>semiconj/semiotic/parser.py</code></summary>
              <pre class="highlight"><code class="language-python">def extract_triads(text: str) -&gt; List[Triad]:
    """Rule-based triad extraction heuristics.
    - sign: prominent noun-like token (capitalized word or noun-ish pattern)
    - object: next capitalized token or repeated head noun
    - interpretant: definitional or summary sentence containing 'is/means/represents/defines'
    """
    sents = split_sentences(text)
    triads: List[Triad] = []
    for s in sents:
        w = WORD_RE.findall(s)
        if not w:
            continue
        # sign
        sign_candidates = [t for t in w if (t[0:1].isupper() and len(t) &gt; 1)]
        sign = sign_candidates[0] if sign_candidates else (w[0] if w else "")
        # object
        obj_candidates = [t for t in w[1:] if (t[0:1].isupper() and len(t) &gt; 1)]
        obj = obj_candidates[0] if obj_candidates else (w[1] if len(w) &gt; 1 else sign)
        # interpretant
        if re.search(r"\b(is|means|represents|defines)\b", s, flags=re.IGNORECASE):
            interpretant = s.strip()
        else:
            interpretant = s.strip()
        if sign and obj and interpretant:
            triads.append(Triad(sign=str(sign), obj=str(obj), interpretant=interpretant))
    return triads</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="semiconj.semiotic.parser.split_sentences" class="doc doc-heading">
            <code class="highlight language-python">split_sentences(text)</code>

<a href="#semiconj.semiotic.parser.split_sentences" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Split text into sentences.</p>
<p>Behavior:
- If an Ollama NLP model is configured, use it to obtain sentence splits.
- Otherwise, fall back to a simple regex-based splitter.</p>


            <details class="quote">
              <summary>Source code in <code>semiconj/semiotic/parser.py</code></summary>
              <pre class="highlight"><code class="language-python">def split_sentences(text: str) -&gt; List[str]:
    """Split text into sentences.

    Behavior:
    - If an Ollama NLP model is configured, use it to obtain sentence splits.
    - Otherwise, fall back to a simple regex-based splitter.
    """
    try:
        from ..config import get_runtime_config
        cfg = get_runtime_config()
        model = getattr(cfg, "nlp_ollama_model", "").strip()
        if model:
            try:
                from ..surrogates.ollama_client import get_shared_client  # type: ignore
                client = get_shared_client(host=getattr(cfg, "nlp_ollama_host", "http://localhost:11434"))
                res = client.nlp(model=model, text=text)
                sents = res.get("sentences", [])
                if isinstance(sents, list) and sents:
                    return [str(s).strip() for s in sents if str(s).strip()]
            except Exception:
                logging.getLogger(__name__).warning('Failed to load Ollama NLP model. Falling back to regex-based sentence splitter.', exc_info=True)
                pass
    except Exception:
        pass
    parts = SENT_RE.split(text.strip())
    return [p for p in parts if p]</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="semiconj.semiotic.parser.words" class="doc doc-heading">
            <code class="highlight language-python">words(s)</code>

<a href="#semiconj.semiotic.parser.words" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Tokenize a sentence string into words, delegating to central tokenizer.
Uses metrics.complexity.tokenize to honor Ollama-based tokenization when enabled.</p>


            <details class="quote">
              <summary>Source code in <code>semiconj/semiotic/parser.py</code></summary>
              <pre class="highlight"><code class="language-python">def words(s: str) -&gt; List[str]:
    """Tokenize a sentence string into words, delegating to central tokenizer.
    Uses metrics.complexity.tokenize to honor Ollama-based tokenization when enabled.
    """
    try:
        from ..metrics.complexity import tokenize  # type: ignore
        return tokenize(s)
    except Exception:
        return WORD_RE.findall(s.lower())</code></pre>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../surrogates/" class="btn btn-neutral float-left" title="Surrogates (pkg)"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../surrogates/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
